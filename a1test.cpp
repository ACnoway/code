#include<bits/stdc++.h>
using namespace std;
const int N=100005;
int f,n,k;
int e[N],ne[N];
int main()
{
    cin>>f>>n>>k;
    for(int i=0;i<n;++i){
        int addr;
        cin>>addr;
        cin>>e[addr]>>ne[addr];
    }
    for(int i=f;~i;i=ne[i]){
        printf("%05d %d %05d\n",i,e[i],ne[i]);
    }
    return 0;
}
/*
77165 99006 09388
09388 28917 41724
41724 40250 48410
48410 60773 48473
48473 15402 37679
37679 73559 30047
30047 77938 65394
65394 17525 62578
62578 49943 41001
41001 77164 84430
84430 3776  05819
05819 60416 51996
51996 18946 99076
99076 70013 34967
34967 984   57614
57614 8829  -0001
*/